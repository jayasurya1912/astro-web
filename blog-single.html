<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;600;700&family=Catamaran:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" href="images/favicon.png">
    <title>Blog Article - Sri Agasthiya maha Siva sutchama Nadi Astrologer centre vaitheeswaran Kovil</title>
    <style>
        /* Custom styles for the blog single page */
        :root {
            --primary-color: #7a0f0f;
            --secondary-color: #8B4513;
            --accent-color: #FFD700;
            --text-dark: #333;
            --text-light: #666;
            --bg-light: #f8f9fa;
        }
        
        body {
            font-family: 'Catamaran', sans-serif;
            color: var(--text-dark);
            background-color: #fff;
        }
        
        /* Language Dropdown */
        .lang-dropdown-container {
            background-color: var(--primary-color);
            padding: 8px 0;
            text-align: center;
        }
        
        /* Navigation */
        nav.navbar {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }
        
        .nav-link {
            color: white !important;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--accent-color) !important;
        }
        
        .btn-dangerese {
            background: linear-gradient(90deg, var(--secondary-color), var(--accent-color));
            color: white;
            border: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-dangerese:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Blog Single Article Styles */
        .blog-single-header {
            background: linear-gradient(rgba(122, 15, 15, 0.8), rgba(122, 15, 15, 0.9)), url('https://via.placeholder.com/1920x600/7a0f0f/ffffff?text=Blog+Article') center/cover no-repeat;
            color: white;
            padding: 80px 0 60px;
            text-align: center;
        }
        
        .blog-single-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .blog-single-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .blog-meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .blog-meta-item i {
            color: var(--accent-color);
        }
        
        .blog-single-content {
            padding: 60px 0;
        }
        
        .blog-article {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            padding: 40px;
            margin-bottom: 40px;
        }
        
        .blog-featured-img {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .article-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-dark);
        }
        
        .article-content p {
            margin-bottom: 1.5rem;
        }
        
        .article-content h2, .article-content h3 {
            color: var(--primary-color);
            margin: 2rem 0 1rem;
        }
        
        .article-content blockquote {
            border-left: 4px solid var(--accent-color);
            padding-left: 20px;
            margin: 2rem 0;
            font-style: italic;
            color: var(--text-light);
        }
        
        /* Article Pagination */
        .article-pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .article-pagination a {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--primary-color);
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .article-pagination a:hover {
            color: var(--secondary-color);
            transform: translateX(5px);
        }
        
        .article-pagination a.prev:hover {
            transform: translateX(-5px);
        }
        
        .page-indicator {
            color: var(--text-light);
            font-weight: 500;
        }
        
        /* Footer */
        .footer-unique {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 60px 0 20px;
        }
        
        .footer-logo img {
            margin-bottom: 15px;
        }
        
        .footer-caption {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
        }
        
        .footer-social a {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            margin-right: 10px;
            transition: all 0.3s ease;
        }
        
        .footer-social a:hover {
            background: var(--accent-color);
            color: var(--primary-color);
            transform: translateY(-3px);
        }
        
        .footer-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .footer-links a:hover {
            color: var(--accent-color);
        }
        
        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .blog-single-header {
                padding: 60px 0 40px;
            }
            
            .blog-single-title {
                font-size: 1.8rem;
            }
            
            .blog-article {
                padding: 30px 20px;
            }
            
            .blog-featured-img {
                height: 250px;
            }
        }
    </style>
</head>
<body>

<!-- Website Content -->
<div class="lang-dropdown-container">
    <div id="google_translate_element"></div>
</div>

<!-- Top Header with Email / Logo / Social Media -->
<div class="container-fluid py-2" style="background:white; border-bottom:1px solid #ddd;">
    <div class="row align-items-center">
        
        <!-- Left: Email & Contact -->
        <div class="col-12 col-md-4 d-flex justify-content-center justify-content-md-start mb-2 mb-md-0" style="background-color: #7a0f0f;padding: 20px;border-bottom-right-radius:50px ;color: white;">
            <div class="d-flex flex-column flex-md-row align-items-center gap-2">
                <a href="mailto:sivavakkiyarastrology@gmail.com" class="text-white text-decoration-none">
                    <i class="bi bi-envelope-fill me-1"></i>  sivavakkiyarastrology@gmail.com
                </a>
            </div>
        </div>

        <!-- Center: Logo -->
        <div class="col-12 col-md-4 text-center" >
            <img src="images/mainlogo.jpg" alt="Siva Vakkiyar Nadi Jothida Nilayam" class="img-fluid" style="max-height:100px;">
        </div>

        <!-- Right: Social Media -->
        <div class="col-12 col-md-4 d-flex justify-content-center justify-content-md-end gap-3" style="background-color: #7a0f0f;padding: 20px;border-bottom-left-radius: 50px;">
            <a href="#" class="text-white"><i class="bi bi-facebook fs-5"></i></a>
            <a href="#" class="text-white"><i class="bi bi-twitter fs-5"></i></a>
            <a href="#" class="text-white"><i class="bi bi-linkedin fs-5"></i></a>
            <a href="#" class="text-white"><i class="bi bi-instagram fs-5"></i></a>
        </div>

    </div>
</div>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark" style="padding: 15px;">
    <div class="container justify-content-center">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse justify-content-center" id="navbarNavDropdown">
            <ul class="navbar-nav gap-4 text-center">
                
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="about.html">About</a>
                </li>

                <!-- Services Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="servicesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Services
                    </a>
                    <ul class="dropdown-menu text-center" aria-labelledby="servicesDropdown">
                        <li><a class="dropdown-item" href="nadijothidam.html">Nadi Jothidam</a></li> 
                        <li><a class="dropdown-item" href="divinepathremedies.html">Divine Path Remedies</a></li>
                        <li><a class="dropdown-item" href="kandamservice.html" >Kandam Service</a></li>
                    </ul>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="gallery.html">Gallery</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link active" href="blog.html">Blog</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact Us</a>
                </li>

                <li class="nav-item op">
                    <a class="btn btn-dangerese px-3" href="contact.html">Enquiry Now</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Blog Single Header -->
<section class="blog-single-header">
    <div class="container">
        <h1 class="blog-single-title" id="articleTitle">Loading Article...</h1>
        <div class="blog-single-meta">
            <div class="blog-meta-item">
                <i class="bi bi-calendar-event"></i>
                <span id="articleDate">Loading...</span>
            </div>
            <div class="blog-meta-item">
                <i class="bi bi-person"></i>
                <span id="articleAuthor">Siva Vakkiyar</span>
            </div>
            <div class="blog-meta-item">
                <i class="bi bi-clock"></i>
                <span id="articleReadTime">Calculating...</span>
            </div>
            <div class="blog-meta-item">
                <i class="bi bi-tag"></i>
                <span id="articleCategory">General</span>
            </div>
        </div>
    </div>
</section>

<!-- Blog Single Content -->
<section class="blog-single-content">
    <div class="container">
        <div class="row justify-content-center">
            <!-- Main Article Content -->
            <div class="col-lg-10 col-xl-8">
                <div class="blog-article">
                    <img src="" alt="Article Featured Image" class="blog-featured-img" id="articleImage">
                    
                    <div class="article-content" id="articleContent">
                        <p>Loading article content...</p>
                    </div>
                    
                    <!-- Article Pagination -->
                    <div class="article-pagination">
                        <a href="#" class="prev" id="prevPageBtn" style="display: none;">
                            <i class="bi bi-arrow-left"></i> Previous Page
                        </a>
                        <span class="page-indicator" id="pageIndicator">Page 1 of 1</span>
                        <a href="#" class="next" id="nextPageBtn" style="display: none;">
                            Next Page <i class="bi bi-arrow-right"></i>
                        </a>
                    </div>
                    
                    <!-- Article Tags -->
                    <div class="blog-tags mt-4" id="articleTags">
                        <!-- Tags will be dynamically added here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="footer-unique mt-5">
    <div class="container">
        <div class="row gy-4">
            
            <!-- Logo & Caption -->
            <div class="col-md-4 text-center text-md-start">
                <span class="footer-logo"><img src="images/mainlogo.jpg" width="190px" alt="Siva Vakkiyar Nadi Jothida Nilayam"></span>
                <p class="footer-caption">Authentic Nadi Astrology Predictions from the Original Nadi Family.</p>
                <div class="footer-social mt-3">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>

            <!-- Quick Links (Flex) -->
            <div class="col-md-4 text-center d-flex align-items-center justify-content-center">
                <nav class="footer-links">
                    <a href="index.html">// Home</a>
                    <a href="about.html">About</a>
                    <a href="nadijothidam.html">Services</a>
                    <a href="gallery.html">Gallery</a>
                    <a href="blog.html">Blog</a>
                    <a href="contact.html">Contact //</a>
                </nav>
            </div>

            <!-- Contact Info -->
            <div class="col-md-4 text-center text-md-end">
                <h5>Contact Us</h5>
                <p class="mb-1">ðŸ“ž +91 6380181363</p>
                <p class="mb-1">ðŸ“ž +91 9514290154</p>
                <p>ðŸ“§ sivavakkiyarastrology@gmail.com</p>
            </div>

        </div>

        <!-- Bottom -->
        <div class="footer-bottom mt-4">
            <p>Â© 2025 Sri Agasthiya maha Siva sutchama Nadi Astrologer centre vaitheeswaran Kovil. All Rights Reserved.</p>
        </div>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
    // Initialize AOS (Animate On Scroll)
    AOS.init({
        duration: 800,
        once: true
    });
    
    // Google Translate
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({
            pageLanguage: 'en',
            includedLanguages: 'en,ta,hi',
            layout: google.translate.TranslateElement.InlineLayout.SIMPLE
        }, 'google_translate_element');
    }

    // Article Pagination Variables
    let currentArticlePage = 1;
    let totalArticlePages = 1;
    let articleContent = "";
    const wordsPerPage = 1000; // Number of words per page
    
    // Load article when page loads
    document.addEventListener('DOMContentLoaded', function() {
        loadArticle();
    });
    
    function loadArticle() {
        // Get article ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const articleId = urlParams.get('id');
        
        if (!articleId) {
            displayError("Article ID not found in URL");
            return;
        }
        
        // Fetch article and categories from server
        Promise.all([
            fetch(`api/posts.php?action=get&id=${articleId}`).then(r => r.json()),
            fetch('api/categories.php?action=list').then(r => r.json())
        ])
        .then(([articleRes, categoriesRes]) => {
            if (!articleRes || articleRes.ok === false || !articleRes.data) {
                throw new Error(articleRes?.error || 'Article not found');
            }
            const article = articleRes.data;
            const categories = categoriesRes?.data || [];
            
            // Display article information
            document.getElementById('articleTitle').textContent = article.title;
            document.getElementById('articleDate').textContent = new Date(article.date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('articleCategory').textContent = 
                (categories.find(cat => (''+cat.id) === (''+article.category))?.name) || 'General';
            
            // Set featured image with normalized path
            const articleImage = document.getElementById('articleImage');
            const isAbs = (u) => typeof u === 'string' && (/^https?:\/\//i).test(u);
            const norm = (u) => !u ? '' : (u.startsWith('/') || isAbs(u) ? u : ('/' + u));
            const imgSrc = article.image ? norm(article.image) : `https://via.placeholder.com/800x400/7a0f0f/ffffff?text=${encodeURIComponent(article.title.substring(0, 30))}`;
            articleImage.src = imgSrc;
            articleImage.alt = article.title;
            articleImage.onerror = function(){ this.onerror=null; this.src = 'https://via.placeholder.com/800x400/7a0f0f/ffffff?text=Blog+Image'; };
            
            // Set article content and calculate reading time
            articleContent = article.content || '';
            const wordCount = articleContent.split(/\s+/).filter(Boolean).length;
            const readingTime = Math.ceil(wordCount / 200); // Average reading speed is 200 words per minute
            document.getElementById('articleReadTime').textContent = `${readingTime} min read`;
            
            // Display tags if available
            if (article.tags) {
                const tagsContainer = document.getElementById('articleTags');
                tagsContainer.innerHTML = `
                    <div class="tag-cloud">
                        ${article.tags.split(',').map(tag => 
                            `<a href="blog.html?tag=${tag.trim()}">${tag.trim()}</a>`
                        ).join('')}
                    </div>
                `;
            }
            
            // Paginate and display article content
            paginateArticle();
        })
        .catch(err => {
            displayError(err.message || 'Failed to load article');
        });
    }
    
    function paginateArticle() {
        const words = articleContent.split(/\s+/);
        totalArticlePages = Math.ceil(words.length / wordsPerPage);
        
        // Calculate start and end indices for current page
        const startIndex = (currentArticlePage - 1) * wordsPerPage;
        const endIndex = Math.min(startIndex + wordsPerPage, words.length);
        
        // Get content for current page
        const pageContent = words.slice(startIndex, endIndex).join(' ');
        
        // Display content
        document.getElementById('articleContent').innerHTML = pageContent;
        
        // Update pagination controls
        updatePaginationControls();
    }
    
    function updatePaginationControls() {
        const prevBtn = document.getElementById('prevPageBtn');
        const nextBtn = document.getElementById('nextPageBtn');
        const pageIndicator = document.getElementById('pageIndicator');
        
        // Show/hide previous button
        if (currentArticlePage > 1) {
            prevBtn.style.display = 'inline-flex';
            prevBtn.onclick = () => {
                currentArticlePage--;
                paginateArticle();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return false;
            };
        } else {
            prevBtn.style.display = 'none';
        }
        
        // Show/hide next button
        if (currentArticlePage < totalArticlePages) {
            nextBtn.style.display = 'inline-flex';
            nextBtn.onclick = () => {
                currentArticlePage++;
                paginateArticle();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                return false;
            };
        } else {
            nextBtn.style.display = 'none';
        }
        
        // Update page indicator
        pageIndicator.textContent = `Page ${currentArticlePage} of ${totalArticlePages}`;
    }
    
    function displayError(message) {
        document.getElementById('articleTitle').textContent = "Error";
        document.getElementById('articleContent').innerHTML = `
            <div class="alert alert-danger" role="alert">
                <h4 class="alert-heading">Unable to Load Article</h4>
                <p>${message}</p>
                <hr>
                <p class="mb-0">Please check the URL or return to the <a href="blog.html">blog page</a>.</p>
            </div>
        `;
    }
</script>
</body>
</html>